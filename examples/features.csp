import "libc/stdio.csp";
import "file.csp";

fn main(): i32 {
    using std;

    let f: &std::File = unwrap_or!(
        file::open("test.txt", file::WRITE), 
        |err: &char| &void => {
            printf("error: %s\n", err);
            <- 0;
        }
    );

    if f {
        file::write(f, "Hello, World!");
        file::close(f);
    }

    <- 0;
}