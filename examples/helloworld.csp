import "libc/stdio.csp";
import "libc/stdlib.csp";
import "vec.csp";

# todo: vla support hinzufÃ¼gen -> is_vla flag, etc.

type VLA: struct {
    n: i32,
    v: i32[]
};  

fn main(argc: i32, argv: &&char): i32
{
    let vector = vec![i32];
    vec_add!(vector, 2);
    vec_add!(vector, 3);

    printf("%d\n", vector[1]);
    #printf("%d\n", test()[-1]);
    <- 0;
}

fn test(): &i32
{
    let vla: &VLA = malloc(sizeof VLA + 10);
    vla.n = 69;
    vla.v[0] = 420;

    <- &(vla.v[1]);
}