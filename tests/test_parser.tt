#define PARSER_TESTS {"parsing empty file", test_parsing_empty_file},                    \
                     {"parsing simple main function", test_parsing_simple_main_func},    \
                     {"parsing complex main function", test_parsing_complex_main_func}   \

#define PARSER_TEST_FUNC(name, src, msg, code) void name(void) {         \
    SrcFile_T* file = get_file(1, src);                                  \
    TEST_ASSERT(file != NULL);                                           \
    ASTProg_T* prog = parse_file(init_list(sizeof(char*)), file, true);  \
    TEST_ASSERT(prog != NULL);                                           \
    code                                                                 \
    /*FIXME: free_ast_prog(prog);*/                                      \
}                                                                

PARSER_TEST_FUNC(test_parsing_empty_file, " ", "00",)

PARSER_TEST_FUNC(test_parsing_simple_main_func, "fn main(): i32 {}", "01",)

PARSER_TEST_FUNC(test_parsing_complex_main_func, "fn main(argc: i32, argv: **char): i32 {}", "02",)